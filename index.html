<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>–ñ–∏–≤–∞—è AR-–æ—Ç–∫—Ä—ã—Ç–∫–∞</title>
    <link rel="stylesheet" href="./style.css">
    
    <!-- MindAR + A-Frame -->
    <script src="https://cdn.jsdelivr.net/npm/mind-ar@1.2.5/dist/mindar-image-aframe.prod.js"></script>
    <script src="https://aframe.io/releases/1.4.2/aframe.min.js"></script>
</head>
<body>
    <!-- –°—Ç–∞—Ä—Ç–æ–≤—ã–π —ç–∫—Ä–∞–Ω (overlay) -->
    <div id="start-screen" class="overlay">
        <div class="overlay-content">
            <h1>üéÅ –ñ–∏–≤–∞—è –æ—Ç–∫—Ä—ã—Ç–∫–∞</h1>
            <p id="card-title">–ó–∞–≥—Ä—É–∑–∫–∞...</p>
            <p class="instruction">–ù–∞–∂–º–∏—Ç–µ "–ó–∞–ø—É—Å—Ç–∏—Ç—å" –∏ –Ω–∞–≤–µ–¥–∏—Ç–µ –∫–∞–º–µ—Ä—É –Ω–∞ –æ—Ç–∫—Ä—ã—Ç–∫—É</p>
            <button id="start-button" class="btn-primary">–ó–∞–ø—É—Å—Ç–∏—Ç—å</button>
            <div id="loader" class="loader hidden">
                <div class="spinner"></div>
                <p>–ó–∞–≥—Ä—É–∂–∞–µ–º –º–∞–≥–∏—é...</p>
            </div>
        </div>
    </div>

    <!-- –≠–∫—Ä–∞–Ω –≤—ã–±–æ—Ä–∞ –æ—Ç–∫—Ä—ã—Ç–∫–∏ (–µ—Å–ª–∏ ID –Ω–µ —É–∫–∞–∑–∞–Ω) -->
    <div id="select-screen" class="overlay hidden">
        <div class="overlay-content">
            <h1>üéÅ –í—ã–±–µ—Ä–∏—Ç–µ –æ—Ç–∫—Ä—ã—Ç–∫—É</h1>
            <div id="cards-list"></div>
        </div>
    </div>

    <!-- –≠–∫—Ä–∞–Ω –æ—à–∏–±–∫–∏ –¥–æ—Å—Ç—É–ø–∞ –∫ –∫–∞–º–µ—Ä–µ -->
    <div id="camera-error" class="overlay hidden">
        <div class="overlay-content">
            <h2>‚ùå –ù–µ—Ç –¥–æ—Å—Ç—É–ø–∞ –∫ –∫–∞–º–µ—Ä–µ</h2>
            <p>–î–ª—è —Ä–∞–±–æ—Ç—ã AR –Ω–µ–æ–±—Ö–æ–¥–∏–º –¥–æ—Å—Ç—É–ø –∫ –∫–∞–º–µ—Ä–µ.</p>
            <div class="instruction-box">
                <p><strong>iOS (Safari):</strong><br>
                –ù–∞—Å—Ç—Ä–æ–π–∫–∏ ‚Üí Safari ‚Üí –ö–∞–º–µ—Ä–∞ ‚Üí –†–∞–∑—Ä–µ—à–∏—Ç—å</p>
                <p><strong>Android (Chrome):</strong><br>
                –ù–∞—Å—Ç—Ä–æ–π–∫–∏ —Å–∞–π—Ç–∞ ‚Üí –†–∞–∑—Ä–µ—à–µ–Ω–∏—è ‚Üí –ö–∞–º–µ—Ä–∞ ‚Üí –†–∞–∑—Ä–µ—à–∏—Ç—å</p>
            </div>
            <button id="retry-camera" class="btn-primary">–ü–æ–ø—Ä–æ–±–æ–≤–∞—Ç—å —Å–Ω–æ–≤–∞</button>
        </div>
    </div>

    <!-- –ü–æ–¥—Å–∫–∞–∑–∫–∞ –¥–ª—è –Ω–∞–≤–µ–¥–µ–Ω–∏—è –Ω–∞ –∫–∞—Ä—Ç–∏–Ω–∫—É -->
    <div id="tracking-hint" class="tracking-hint hidden">
        <p>üì∏ –ù–∞–≤–µ–¥–∏—Ç–µ –∫–∞–º–µ—Ä—É –Ω–∞ –∫–∞—Ä—Ç–∏–Ω–∫—É –æ—Ç–∫—Ä—ã—Ç–∫–∏</p>
    </div>

    <!-- –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∑–≤—É–∫–æ–º -->
    <div id="sound-control" class="sound-control hidden">
        <button id="toggle-sound" class="btn-sound">üîá –ó–≤—É–∫ –í–´–ö–õ</button>
    </div>

    <!-- AR —Å—Ü–µ–Ω–∞ -->
    <a-scene
        id="ar-scene"
        mindar-image="imageTargetSrc: ; autoStart: false; uiLoading: no; uiError: no; uiScanning: no;"
        color-space="sRGB"
        renderer="colorManagement: true, physicallyCorrectLights"
        vr-mode-ui="enabled: false"
        device-orientation-permission-ui="enabled: false"
        class="hidden">
        
        <a-assets>
            <video id="ar-video"
                   preload="auto"
                   playsinline
                   webkit-playsinline
                   muted
                   crossorigin="anonymous"></video>
        </a-assets>

        <a-camera position="0 0 0" look-controls="enabled: false"></a-camera>

        <a-entity id="target-entity" mindar-image-target="targetIndex: 0">
            <a-video
                id="video-plane"
                src="#ar-video"
                position="0 0 0"
                height="1"
                width="1.778"
                rotation="0 0 0"></a-video>
        </a-entity>
    </a-scene>

    <!-- –ü–æ–¥–∫–ª—é—á–∞–µ–º –∫–æ–Ω—Ñ–∏–≥ –∏ –æ—Å–Ω–æ–≤–Ω–æ–π —Å–∫—Ä–∏–ø—Ç -->
    <script src="./config.js"></script>
    <script src="./app.js"></script>
</body>
</html>